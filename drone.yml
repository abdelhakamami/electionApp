kind: pipeline
name: build-and-push
type: kubernetes


platform:
  os: linux
  arch: amd64

steps: 
  - name: build-image-frontend
    image: docker:dind
    volumes:
    - name: dockersock
      path: /var/run/
    commands:
      - docker build -t frontend-image-:dev -f ./front-end/Dockerfile .

  - name: push-image-frontend
    image: plugins/docker
    settings:
      repository: abdelhakavaxia
      tag: dev
      registry: docker.io
      username:
        from_secret: docker_username
      password:
        from_secret: docker_password
        volumes:
- name: dockersock
  host:
    path: /var/run/
