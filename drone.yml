kind: pipeline
name: build-and-push
type: kubernetes


platform:
  os: linux
  arch: amd64

steps:
  

  - name: push-image-backend
    image: plugins/kaniko
    settings:
      
      tag: dev
      repo: docker.io/abelhakavaxia
      username: abdelhakavaxia
        #from_secret:
      password: abdelhakavaxia7*
        #from_secret: abdelhakavaxia7*
      dockerfile: ./back-end/Dockerfile 

  - name: build-image-frontend
    image: docker:latest
    commands:
      - docker build -t frontend-image-:dev -f ./front-end/Dockerfile .

  - name: push-image-frontend
    image: plugins/docker
    settings:
      repository: abdelhakavaxia
      tag: dev
      registry: docker.io
      username:
        from_secret: docker_username
      password:
        from_secret: docker_password
